<div class="form-wrapper">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)" autocomplete="off">

        <h1>Добавить событие</h1>
        <mat-form-field appearance="fill">
            <mat-label>Название события</mat-label>
            <input type="text" name="name" #name="ngModel" ngModel required matInput minlength="4">

            <div class="error" *ngIf="name.invalid && name.touched">
                <span *ngIf="name.hasError('required')">Это поле обязательное</span>
                <span *ngIf="name.hasError('minlength')">Минимальная длина 4</span>
            </div>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Тип события</mat-label>
            <mat-select (selectionChange)="changeValidators($event.value)" name="type" ngModel required>
                <ng-container *ngFor="let type of types">
                    <mat-option [value]="type[0]">{{type[1]}}</mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>

        <ng-container *ngIf="type === 'holiday'">
            <mat-form-field appearance="fill">
                <mat-label>Бюджет</mat-label>
                <input name="budget" ngModel #budget="ngModel" required matInput minlength="4">
            </mat-form-field>
            <div class="error" *ngIf="budget.invalid && name.touched">
                <span *ngIf="budget.hasError('required')">Это поле обязательное</span>
                <span *ngIf="budget.hasError('minlength')">Минимальная длина 4</span>
            </div>
        </ng-container>

        <ng-container *ngIf="type === 'event'">
            <mat-form-field appearance="fill">
                <mat-label>Куда идти?</mat-label>
                <input name="address" ngModel #address="ngModel" required matInput minlength="4">
                <div class="error" *ngIf="address.invalid && address.touched">
                    <span *ngIf="address.hasError('required')">Это поле обязательное</span>
                    <span *ngIf="address.hasError('minlength')">Минимальная длина 4</span>
                </div>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>Во сколько?</mat-label>
                <input name="time" ngModel required matInput [ngxTimepicker]="picker" [format]="24">
                <ngx-material-timepicker #picker></ngx-material-timepicker>
            </mat-form-field>
        </ng-container>

        <ng-container *ngIf="type === 'note'">
            <mat-form-field appearance="fill">
                <mat-label>Заметка</mat-label>
                <input name="note" ngModel #note="ngModel" required matInput minlength="4">
                <div class="error" *ngIf="note.invalid && note.touched">
                    <span *ngIf="note.hasError('required')">Это поле обязательное</span>
                    <span *ngIf="note.hasError('minlength')">Минимальная длина 4</span>
                </div>
            </mat-form-field>
        </ng-container>

        <button class="submit" mat-button type="submit" [disabled]="form.invalid">Save</button>
    </form>
</div>